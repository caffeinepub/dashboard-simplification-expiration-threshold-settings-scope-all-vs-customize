{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fully translate Test Bench pages and default new users to English",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Replace all hardcoded user-facing strings across Test Bench list/detail pages and their subcomponents with i18n keys, and ensure complete en-US/fr-FR translations exist for every key used.",
      "acceptanceCriteria": [
        "All user-facing text on the Test Bench list page and Test Bench detail page is rendered via the i18n `t(...)` function (no hardcoded English/French strings remain in those pages).",
        "All user-facing text in Test Bench-related UI components used by those pages (e.g., create/edit bench modals, bench overview, history, documents, components editors, empty/loading/error states, button/label text) is rendered via the i18n `t(...)` function.",
        "`frontend/src/i18n/translations.ts` contains corresponding translation entries for both `en-US` and `fr-FR` for every key used by the Test Bench pages/components.",
        "Switching the language selector updates all Test Bench page text immediately without requiring a refresh."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/Benches/BenchListPage.tsx",
          "operation": "modify",
          "description": "Replace all hardcoded Bench List UI strings (loading/empty states, headings, descriptions, placeholders, labels, button text, link labels) with `t(...)` translation keys via `useI18n()`. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/Benches/BenchDetailPage.tsx",
          "operation": "modify",
          "description": "Replace all hardcoded Bench Detail UI strings (loading/not-found/overview/tabs/health book/history copy, button labels, confirm dialog copy, toast messages) with `t(...)` translation keys via `useI18n()`. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/Benches/components/AddBenchModal.tsx",
          "operation": "modify",
          "description": "Replace all hardcoded strings in the Add Bench modal (dialog title/description, field labels/placeholders, validation errors, progress labels, helper text, duplication section copy, and success/error toasts) with `t(...)` translation keys. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/Benches/components/EditBenchModal.tsx",
          "operation": "modify",
          "description": "Replace all hardcoded strings in the Edit Bench modal (dialog title/description, field labels/placeholders, validation errors, helper text, and success/error toasts) with `t(...)` translation keys. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/Benches/components/BenchComponentsTableEditor.tsx",
          "operation": "modify",
          "description": "Replace all hardcoded strings in the components editor table (column headers, inline action labels, empty states, form labels, status text, and any error/success messaging) with `t(...)` translation keys. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/Benches/components/BenchDocumentsEditor.tsx",
          "operation": "modify",
          "description": "Replace all hardcoded strings in the documents editor (section headings, category controls, upload/download/remove labels, progress text, empty/loading/error states, and toast messages) with `t(...)` translation keys. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/Benches/components/BenchHistoryList.tsx",
          "operation": "modify",
          "description": "Replace all hardcoded strings in the history list (title/empty state labels, action text fallbacks, timestamp labels, and any error/loading copy) with `t(...)` translation keys. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/Benches/components/BenchPhoto.tsx",
          "operation": "modify",
          "description": "Replace any hardcoded strings used for photo loading/error/fallback UI with `t(...)` translation keys. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/Benches/components/DuplicateComponentDialog.tsx",
          "operation": "modify",
          "description": "Replace all hardcoded strings in the duplicate-component dialog (dialog title/description, bench selection labels, buttons, empty/loading/error states, and toasts) with `t(...)` translation keys. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/Benches/components/DocumentCategoriesInput.tsx",
          "operation": "modify",
          "description": "Replace all hardcoded strings in document categories input (category labels, add/remove buttons, placeholders, version/file labels, validation copy) with `t(...)` translation keys. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/Benches/components/TagsInput.tsx",
          "operation": "modify",
          "description": "Replace all hardcoded strings in tags input (placeholders, helper labels, empty suggestion text, remove label/aria text if present) with `t(...)` translation keys. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/i18n/translations.ts",
          "operation": "modify",
          "description": "Add/extend TranslationKey entries and provide complete `en-US` and `fr-FR` values for every new key introduced for Test Bench pages/components (including modal copy, validation errors, toasts, empty/loading/error states, and table/form labels). Ensure all new/updated en-US values are in English. Verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Default first-time users to English (en-US) when no saved preference exists, while continuing to persist explicit user language choice.",
      "acceptanceCriteria": [
        "Frontend default language initialization uses `en-US` when no valid saved preference exists in localStorage and no backend preference exists.",
        "Backend `getLanguageTag()` returns `en-US` when the caller has no stored profile/language preference (instead of returning French).",
        "Backend `getCallerUserProfile()` default profile (when no profile exists yet) uses `languageTag = \"en-US\"`.",
        "After a signed-in user selects a different language, the preference is persisted and is used on subsequent visits/sessions (i.e., it no longer falls back to `en-US`)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/i18n/I18nProvider.tsx",
          "operation": "modify",
          "description": "Change default language initialization behavior to use `en-US` for first-time users: initialize state to `en-US`, and update the initialization logic to (1) use backend language when authenticated and valid, else (2) use a valid localStorage language when present, else (3) fall back to `en-US`. Keep persisting explicit selections to localStorage and backend (when authenticated). Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/layout/AppShell.tsx",
          "operation": "modify",
          "description": "Ensure the language selector (or equivalent language-switch UI) continues to call `setLanguageTag(...)` from i18n context so language changes apply immediately across Test Bench pages without refresh, and remains consistent with the updated default initialization behavior. Verify the component's usage instructions before implementing."
        }
      ]
    }
  ]
}